---
layout: posts
title: di
comment: true
tags: [DI][dependency injection]
---

### di 정리

내가 클래스 인스턴스를 만들지 않음

남이 만들어서 넣어주고 그걸 사용함

new 하지 않는다. di한다.(직역하면 간접 주입 받는다?)

---

우리를 괴롭힐 4가지 어노테이션
- @Module
- @Provides
- @Inject
- @Component



### 실습 시작
1. 주입당할 클래스 생성

{% highlight language linenos %}
class JinRamyon {
    fun getName(): String {
        return "진라면"
    }
}
{% endhighlight %}

2. 인스턴트 만들어줄 모듈

{% highlight language linenos %}
@Module
class RamyunFactoryModule {
    @Provides
    internal fun provideJinRamyon(): JinRamyon {
        return JinRamyon()
    }
}
{% endhighlight %}

3. 주입 요청한 곳에 모듈을 연결시켜주는 컴포넌트

{% highlight language linenos %}
@Component(modules = [RamyunFactoryModule::class])
interface OttugiComponent {
    fun inject(activity: MainActivity)

}
{% endhighlight %}

4. 주입을 요청

{% highlight language linenos %}
class MainActivity : AppCompatActivity() {

    @Inject
    lateinit var bread: Bread

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)

        var sampleComponent = DaggerSPCComponent.create()
        sampleComponent.inject(this)

        Log.d("dagger_test", bread.getName())

    }
}
{% endhighlight %}

---
@Modlue은 클래스 위에

@Provides는 메소드 위에

---

의존 요청

@Injection 어노테이션을 붙이자

아래 항목을 주입요청 가능
- 생성자
- 필드
- 메소드에

---

1. 생성자에 사용

- 하나의 생성자에만
- '생성자의 인자'를 주입받음
- 인자는 private final속성 부여할것
